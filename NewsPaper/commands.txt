from news.models import * 
user1 = User.objects.create_user('user1')    
user2 = User.objects.create_user('user2')    
user1.save() 
user2.save()
auth = Author.objects.create(user_auth=user1) 
auth2 = Author.objects.create(user_auth=user2) 
category1 = Category.objects.create(category_name='Категория1')             
category2 = Category.objects.create(category_name='Категория2') 
category3 = Category.objects.create(category_name='Категория3') 
category4 = Category.objects.create(category_name='Категория4')
post1 = Post.objects.create(post_tittle='Заголовок1',post_text='Статья1',author=auth)     
post1.category.add(category4)   
post2 = Post.objects.create(post_tittle='Заголовок2',post_text='Статья2',author=auth)     
post2.category.add(category1)  
news1 = Post.objects.create(post_tittle='Заголовок3',post_text='Новость1',author=auth,post_select=True)
news1.category.add(category2, category4)
comment1 = Comment.objects.create(comment_text= 'Коммент1',post=post1,user=user1)  
comment2 = Comment.objects.create(comment_text= 'Коммент2',post=post1,user=user1) 
comment3 = Comment.objects.create(comment_text= 'Коммент3',post=post2,user=user1) 
comment4 = Comment.objects.create(comment_text= 'Коммент4',post=news1,user=user1) 
post1.like_p() 
post2.like_p() 
post2.like_p()
news1.like_p() 
news1.like_p()
news1.like_p() 
news1.dislike_p() 
comment1.dislike_c() 
comment1.dislike_c()
comment1.dislike_c()
comment1.dislike_c()
comment2.like_c()
comment2.like_c()
comment2.like_c()
comment3.like_c() 
comment4.like_c() 
comment1.like_c() 
comment1.like_c()
comment1.like_c()
auth.update_rating()
auth2.update_rating()

best_user = User.objects.order_by('-author__user_rating')[0]
print(best_user.username, best_user.author.user_rating)

best_post = Post.objects.filter(post_select=False).order_by('-post_rating')[0]
print(best_post.post_dt.date(), best_post.author.user_auth.username, best_post.post_rating, best_post.post_tittle, best_post.preview())

comments_best_post = Comment.objects.filter(post=best_post)
for comment in comments_best_post:
	print(comment.comment_dt.date(), comment.user.username, comment.comment_rating, comment.comment_text) 

